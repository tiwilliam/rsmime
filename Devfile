name: rsmime
version: 1

up:
  - python: 3.11.4
  - run: pip install .[dev]

commands:
  build:
    description: Build the package
    tasks:
      - run: maturin build --release --strip

  develop:
    description: Develop the package
    tasks:
      - run: maturin develop  --release --strip

  test:
    description: Run tests
    tasks:
      - run: maturin develop  --release --strip
      - run: pytest -vv

  docs:
    description: Build new documentation HTML to site directory
    tasks:
      - run: mkdocs build

  docs:serve:
    description: Serve and watch documentation for development
    tasks:
      - run: mkdocs serve
